{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      username: this.$global_msg.userInfo.username,\n      birthday: this.$global_msg.userInfo.birthday,\n      sex: this.$global_msg.userInfo.sex,\n      other: this.$global_msg.userInfo.other,\n      email: this.$global_msg.userInfo.email,\n      myPath: this.$global_msg.userInfo.myPath,\n      phone: this.$global_msg.userInfo.phone\n    };\n  },\n  methods: {\n    save() {\n      var user_ = {};\n      if (this.username == \"\" || this.email == \"\" || this.username == null || this.email == null) {\n        this.$message({\n          message: '用户名或邮件不能为空',\n          type: 'error'\n        });\n        return;\n      }\n      user_.username = this.username;\n      user_.birthday = this.birthday;\n      user_.sex = this.sex;\n      user_.other = this.other;\n      user_.email = this.email;\n      user_.myPath = this.myPath;\n      user_.phone = this.phone;\n      // console.log('user_')\n      // console.log(user_)\n      var url = 'http://localhost:8081/runyun/updateUserInfo/' + this.$global_msg.userId;\n      this.axios.post(url, user_).then(resp => {\n        let data = resp.data;\n        if (data.code == 200) {\n          this.$global_msg.userInfo = data;\n          this.$message({\n            message: data.msg,\n            type: 'success'\n          });\n          return;\n        }\n      });\n    },\n    _return() {\n      var url = 'http://localhost:8081/runyun/getUser/' + this.$global_msg.userId;\n      this.axios.get(url).then(resp => {\n        let data = resp.data;\n        if (data.code == 200) {\n          this.$global_msg.userInfo = data;\n          this.$router.push({\n            path: '/Persondata'\n          });\n        }\n      });\n    },\n    savePd() {\n      var pd = this.password;\n      var reptPd = this.password2;\n      if (pd != reptPd) {\n        alert(\"密码不一致！\");\n      } else {\n        var d = {};\n        d.password = pd;\n        var url = 'http://localhost:8081/runyun/updatePd/' + this.$global_msg.userId;\n        this.axios.post(url, d).then(resp => {\n          let data = resp.data;\n          if (data.code == 200) {\n            this.$message({\n              message: data.msg,\n              type: 'success'\n            });\n            this.password = '';\n            this.password2 = '';\n          }\n        });\n      }\n    },\n    _returnPd() {\n      this.$set(this, 'password', '');\n      this.$set(this, 'password2', '');\n    }\n  }\n};","map":{"version":3,"mappings":";AA+DA;EAEAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;UACAC;UACAC;QACA;QACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MACA;MACA;MACA;QACA;QACA;UACA;UACA;YACAF;YACAC;UACA;UACA;QACA;MACA;IACA;IAEAE;MACA;MACA;QACA;QACA;UACA;UACA;YAAAC;UAAA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;QACA;QACAC;QACA;QACA;UACA;UACA;YACA;cACAP;cACAC;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAO;MACA;MACA;IACA;EAGA;AAGA","names":["data","username","birthday","sex","other","email","myPath","phone","methods","save","message","type","user_","_return","path","savePd","alert","d","_returnPd"],"sourceRoot":"src/views/Persondata","sources":["Persondata.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-tabs type=\"border-card\">\r\n        <el-tab-pane label=\"基本信息\">\r\n          <div class=\"footer1\">\r\n            <div class=\"header1\">\r\n                <h2>基本信息</h2>\r\n            </div>\r\n            <div class=\"main1\">\r\n                <p>\r\n                    昵称<input type=\"text\" v-model=\"username\">\r\n                </p>\r\n                <p>\r\n                    生日<input type=\"date\" v-model=\"birthday\">\r\n                </p>\r\n                <p>\r\n                    性别\r\n                    <input type=\"radio\" name=\"sex\" value=\"男\" v-model=\"sex\">男\r\n                    <input type=\"radio\" name=\"sex\" value=\"女\" v-model=\"sex\">女\r\n                </p>\r\n                <p>\r\n                    备注\r\n                    <textarea cols = \"20\" rows = \"2\" wrap = \"hard\" id = \"story\" name = \"story\" \r\n                        v-model=\"other\"></textarea>\r\n                </p>\r\n            </div>\r\n            <div class=\"header2\">\r\n                <h2>联系方式</h2>\r\n            </div>\r\n            <div class=\"main2\">\r\n                <p>\r\n                    邮箱<input type=\"email\" name=\"myemail\" v-model=\"email\">\r\n                </p>\r\n                <p>\r\n                    个人地址<input type=\"url\" placeholder=\"完整地址\" v-model=\"myPath\">\r\n                </p>\r\n                <p>\r\n                    电话<input type=\"tel\" v-model=\"phone\">\r\n                </p>\r\n            </div>\r\n            <div class=\"footer\">\r\n                <button type=\"submit\" class=\"mybutton1\" @click=\"save\">保存</button>\r\n                <button type=\"reset\" class=\"mybutton2\" @click=\"_return\">撤销</button>\r\n            </div>\r\n          </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"密码\">\r\n                <p>\r\n                    新密码<input type=\"text\" v-model=\"password\">\r\n                </p>\r\n                <p>\r\n                    确认密码<input type=\"text\" v-model=\"password2\">\r\n                </p>\r\n                <div class=\"footer1\">\r\n                <button class=\"mybutton1\" @click=\"savePd\">保存</button>\r\n                <button class=\"mybutton2\" @click=\"_returnPd\">撤销</button>\r\n            </div>\r\n        </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        \r\n        data() {\r\n            return {\r\n                username: this.$global_msg.userInfo.username,\r\n                birthday: this.$global_msg.userInfo.birthday,\r\n                sex: this.$global_msg.userInfo.sex,\r\n                other: this.$global_msg.userInfo.other,\r\n                email: this.$global_msg.userInfo.email,\r\n                myPath: this.$global_msg.userInfo.myPath,\r\n                phone: this.$global_msg.userInfo.phone\r\n            };\r\n        },\r\n        methods: {\r\n            save() {\r\n                var user_= {};\r\n                if (this.username == \"\" || this.email == \"\" || this.username == null || this.email == null) {\r\n                    this.$message({\r\n                      message: '用户名或邮件不能为空',\r\n                      type: 'error'\r\n                    });\r\n                    return;\r\n                }\r\n                user_.username = this.username;\r\n                user_.birthday = this.birthday;\r\n                user_.sex = this.sex;\r\n                user_.other = this.other;\r\n                user_.email = this.email;\r\n                user_.myPath = this.myPath;\r\n                user_.phone = this.phone;\r\n                // console.log('user_')\r\n                // console.log(user_)\r\n                var url = 'http://localhost:8081/runyun/updateUserInfo/'+this.$global_msg.userId;\r\n                this.axios.post(url, user_).then((resp)=>{\r\n                    let data = resp.data;\r\n                    if (data.code == 200) {\r\n                        this.$global_msg.userInfo = data;\r\n                        this.$message({\r\n                            message: data.msg,\r\n                            type: 'success'\r\n                        });\r\n                        return;\r\n                    }\r\n                })\r\n            },\r\n\r\n            _return() {\r\n                var url = 'http://localhost:8081/runyun/getUser/'+this.$global_msg.userId;\r\n                this.axios.get(url).then((resp)=>{\r\n                    let data = resp.data;\r\n                    if (data.code == 200) {\r\n                        this.$global_msg.userInfo = data;\r\n                        this.$router.push({path:'/Persondata'})\r\n                    }\r\n                })\r\n            },\r\n            savePd() {\r\n                var pd = this.password;\r\n                var reptPd = this.password2;\r\n                if (pd != reptPd) {\r\n                    alert(\"密码不一致！\");\r\n                } else {\r\n                    var d = {};\r\n                    d.password = pd;\r\n                    var url = 'http://localhost:8081/runyun/updatePd/'+this.$global_msg.userId;\r\n                    this.axios.post(url, d).then((resp)=>{\r\n                        let data = resp.data;\r\n                        if (data.code == 200) {\r\n                            this.$message({\r\n                                message: data.msg,\r\n                                type: 'success'\r\n                            });\r\n                            this.password = '';\r\n                            this.password2 = '';\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            _returnPd() {\r\n                this.$set(this,'password','');\r\n                this.$set(this,'password2','');\r\n            },\r\n\r\n\r\n        },\r\n\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header1{\r\n    display: flex;\r\n    color: blue;\r\n}\r\n.main1{\r\n    margin: 10px 10px;\r\n    border-top: 1px solid #CCC;\r\n}\r\n.main1,p{\r\n    margin-top: 20px;\r\n}\r\n.header2{\r\n    display: flex;\r\n    color: blue;\r\n}\r\n.main2{\r\n    margin: 10px 10px;\r\n    border-top: 1px solid #CCC;\r\n}\r\n.main2,p{\r\n    margin-top: 20px;\r\n}\r\n.footer{\r\n    background: white;\r\n}\r\n.mybutton1{\r\n    margin-right: 50px;\r\n    width: 50px;\r\n    height: 30px;\r\n    background: blue;\r\n    color: white;\r\n}\r\n.mybutton2{\r\n    margin-left: 50px;\r\n    width: 50px;\r\n    height: 30px;\r\n    color: white;\r\n    background: grey;\r\n}\r\n.footer1,p{\r\n    margin-top: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
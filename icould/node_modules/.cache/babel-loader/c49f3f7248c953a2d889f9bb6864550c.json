{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      tableData: this.$global_msg.binData,\n      show: false,\n      pathArr: []\n    };\n  },\n  computed: {\n    //经过拼接的面包屑目录\n    pathString: function () {\n      var pstr = \"/\";\n      if (this.pathArr.length === 0) {\n        return pstr;\n      }\n      for (var i = 0; i < this.pathArr.length; i++) {\n        var tempStr = this.pathArr[i] + \"/\";\n        pstr += tempStr;\n      }\n      return pstr;\n    }\n  },\n  methods: {\n    //返回上级目录\n    returnToLastDir() {\n      if (this.pathArr.length === 0) {\n        this.$message.info(\"已经到达根目录\");\n        return;\n      }\n      this.pathArr.pop();\n      var url = 'http://localhost:8989/getFilesByBinPath?path=' + this.pathString;\n      this.axios({\n        method: 'GET',\n        url: url\n      }).then(resp => {\n        let data = resp.data;\n        console.log(data);\n        if (data.success) {\n          this.tableData = data.data.fileList;\n        }\n      });\n    },\n    //点入文件夹\n    enterNextDir(row) {\n      console.log(row);\n      var tempStr = row.fileName;\n      this.pathArr.push(tempStr);\n      var url = 'http://localhost:8989/getFilesByBinPath?path=' + this.pathString;\n      this.axios({\n        method: 'GET',\n        url: url\n      }).then(resp => {\n        let data = resp.data;\n        console.log(data);\n        if (data.success) {\n          this.tableData = data.data.fileList;\n        }\n      });\n    },\n    recoverFile_(row, index) {\n      if (confirm(\"是否恢复\")) {\n        this.axios({\n          method: 'PUT',\n          url: 'http://localhost:8989/recoverFolder',\n          data: {\n            folderId: row.id\n          }\n        }).then(resp => {\n          let data = resp.data;\n          if (data.success) {\n            this.tableData.splice(index, 1);\n            this.$message({\n              type: 'success',\n              message: data.message\n            });\n          } else {\n            this.$message({\n              type: 'info',\n              message: data.message\n            });\n          }\n        });\n      } else {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        });\n      }\n    },\n    // 删除文件夹或文件\n    deleteBinFile_(row, index) {\n      if (confirm(\"是否删除！\")) {\n        this.axios({\n          method: 'DELETE',\n          url: 'http://localhost:8989/deleteBinFolder',\n          data: {\n            folderId: row.id\n          }\n        }).then(resp => {\n          let data = resp.data;\n          if (data.success) {\n            this.tableData.splice(index, 1);\n            this.$message({\n              type: 'success',\n              message: data.message\n            });\n          } else {\n            this.$message({\n              type: 'info',\n              message: data.message\n            });\n          }\n        });\n      } else {\n        this.$message({\n          type: 'info',\n          message: '取消删除'\n        });\n      }\n    },\n    // 获取路径下文件和文件夹\n    getBinFileAndFolder() {\n      var url = 'http://localhost:8989/getFilesAndFolders?path=/';\n      this.axios({\n        method: 'GET',\n        url: url\n      }).then(resp => {\n        let data = resp.data;\n        console.log(data);\n        if (data.success) {\n          this.tableData = data.data.fileList;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAkDA;EACAA;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;QACA;QACAC;MACA;MACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;MACA;MACA;QACAC;QACAC;MACA;QACA;QACAC;QACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACAD;MACA;MACA;MACA;MACA;QACAF;QACAC;MACA;QACA;QACAC;QACA;UACA;QACA;MACA;IACA;IAEAE;MACA;QACA;UACAJ;UACAC;UACAV;YACAc;UACA;QACA;UACA;UACA;YACA;YACA;cACAC;cACAC;YACA;UACA;YACA;cACAD;cACAC;YACA;UACA;QACA;MACA;QACA;UACAD;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACAR;UACAC;UACAV;YACAc;UACA;QACA;UACA;UACA;YACA;YACA;cACAC;cACAC;YACA;UACA;YACA;cACAD;cACAC;YACA;UACA;QACA;MACA;QACA;UACAD;UACAC;QACA;MACA;IACA;IAEA;IACAE;MACA;MACA;QACAT;QACAC;MACA;QACA;QACAC;QACA;UACA;QACA;MACA;IACA;EAGA;AACA","names":["data","tableData","show","pathArr","computed","pathString","pstr","methods","returnToLastDir","method","url","console","enterNextDir","recoverFile_","folderId","type","message","deleteBinFile_","getBinFileAndFolder"],"sourceRoot":"src/views/Bin","sources":["Bin.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"header\">\r\n        <span class=\"title\">回收站</span>\r\n        <el-button style=\"margin-left: 20px; height: 40px;margin-top: 10px\" type=\"primary\" @click=\"returnToLastDir()\">返回上级</el-button>\r\n      </div>\r\n<!--      <div class=\"middle\">-->\r\n<!--        <el-button class=\"canclebtn\" type=\"primary\" icon=\"el-icon-folder-checked\"-->\r\n<!--          @click=\"recoverFile\">恢复</el-button-->\r\n<!--        >-->\r\n<!--      </div>-->\r\n      <div class=\"line\"></div>\r\n      <!--        展现面包屑-->\r\n      <div class=\"bread\">\r\n        当前路径：{{pathString}}\r\n      </div>\r\n      <div class=\"body\">\r\n        <el-table\r\n          :data=\"tableData\"\r\n          height=\"550\"\r\n          stripe\r\n          border\r\n          style=\"width: 100%\"\r\n          ref=\"accountTable\"\r\n        >\r\n<!--          <el-table-column type=\"selection\" width=\"150\"> </el-table-column>-->\r\n          <el-table-column v-if=\"show\" prop=\"id\" label=\"id\" width=\"200\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"fileImg\" label=\"\" width=\"50\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"fileName\" label=\"文件名\" width=\"200\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"virtualPath\" label=\"文件目录\" width=\"300\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"fileSize\" label=\"文件大小(KB)\" width=\"150\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"deleteTime\" label=\"删除日期\"> </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"400\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" v-if=\"scope.row.isfolder===1\" @click=\"enterNextDir(scope.row)\">进入</el-button>\r\n              <el-button size=\"mini\" v-if=\"scope.row.binPath==='/'\" @click=\"recoverFile_(scope.row, scope.$index)\">恢复</el-button>\r\n              <el-button size=\"mini\" v-if=\"scope.row.binPath==='/'\" type=\"danger\" @click=\"deleteBinFile_(scope.row,scope.$index)\">彻底删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </template>\r\n      \r\n      <script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        tableData: this.$global_msg.binData,\r\n        show: false,\r\n        pathArr:[],\r\n      };\r\n    },\r\n    computed:{\r\n      //经过拼接的面包屑目录\r\n      pathString:function (){\r\n        var pstr = \"/\";\r\n        if(this.pathArr.length===0){\r\n          return pstr;\r\n        }\r\n        for(var i = 0;i<this.pathArr.length;i++){\r\n          var tempStr = this.pathArr[i] + \"/\";\r\n          pstr += tempStr;\r\n        }\r\n        return pstr;\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      //返回上级目录\r\n      returnToLastDir(){\r\n        if(this.pathArr.length===0){\r\n          this.$message.info(\"已经到达根目录\")\r\n          return;\r\n        }\r\n        this.pathArr.pop();\r\n        var url = 'http://localhost:8989/getFilesByBinPath?path=' + this.pathString;\r\n        this.axios({\r\n          method:'GET',\r\n          url: url,\r\n        }).then((resp)=>{\r\n          let data = resp.data;\r\n          console.log(data)\r\n          if (data.success) {\r\n            this.tableData = data.data.fileList;\r\n          }\r\n        })\r\n      },\r\n\r\n      //点入文件夹\r\n      enterNextDir(row){\r\n        console.log(row);\r\n        var tempStr = row.fileName;\r\n        this.pathArr.push(tempStr);\r\n        var url = 'http://localhost:8989/getFilesByBinPath?path=' + this.pathString;\r\n        this.axios({\r\n          method:'GET',\r\n          url: url,\r\n        }).then((resp)=>{\r\n          let data = resp.data;\r\n          console.log(data)\r\n          if (data.success) {\r\n            this.tableData = data.data.fileList;\r\n          }\r\n        })\r\n      },\r\n\r\n        recoverFile_(row, index) {\r\n          if(confirm(\"是否恢复\")) {\r\n            this.axios({\r\n              method:'PUT',\r\n              url:'http://localhost:8989/recoverFolder',\r\n              data:{\r\n                folderId: row.id\r\n              }\r\n            }).then((resp) => {\r\n              let data=resp.data;\r\n              if(data.success) {\r\n                this.tableData.splice(index,1)\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: data.message\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: data.message\r\n                });\r\n              }\r\n            });\r\n          }else {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '取消操作'\r\n            });\r\n          }\r\n        },\r\n\r\n      // 删除文件夹或文件\r\n      deleteBinFile_(row, index) {\r\n        if(confirm(\"是否删除！\")) {\r\n          this.axios({\r\n            method:'DELETE',\r\n            url:'http://localhost:8989/deleteBinFolder',\r\n            data:{\r\n              folderId: row.id\r\n            }\r\n          }).then((resp) => {\r\n            let data=resp.data;\r\n            if(data.success) {\r\n              this.tableData.splice(index,1)\r\n              this.$message({\r\n                type: 'success',\r\n                message: data.message\r\n              });\r\n            } else {\r\n              this.$message({\r\n                type: 'info',\r\n                message: data.message\r\n              });\r\n            }\r\n          });\r\n        }else {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          });\r\n        }\r\n      },\r\n\r\n      // 获取路径下文件和文件夹\r\n      getBinFileAndFolder() {\r\n        var url = 'http://localhost:8989/getFilesAndFolders?path=/';\r\n        this.axios({\r\n          method:'GET',\r\n          url: url,\r\n        }).then((resp)=>{\r\n          let data = resp.data;\r\n          console.log(data)\r\n          if (data.success) {\r\n            this.tableData = data.data.fileList;\r\n          }\r\n        })\r\n      },\r\n\r\n\r\n    },\r\n  };\r\n  </script>\r\n      \r\n      <style lang=\"less\" scoped>\r\n  .header {\r\n    background-color: #dcdfe6;\r\n    height: 60px;\r\n    line-height: 60px;\r\n    display: flex;\r\n  }\r\n\r\n  .title {\r\n    color: #409eff;\r\n    float: left;\r\n    font-size: 30px;\r\n   // margin-left: 170px;\r\n    margin-left: 20px;\r\n  }\r\n  .middle {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    display: flex;\r\n  }\r\n  .canclebtn {\r\n    display: flex;\r\n    //margin-left: 170px;\r\n    height: 80%;\r\n    margin-top: 5px;\r\n    margin-left: 10px;\r\n  }\r\n  .line {\r\n    height: 0;\r\n    width: 100%;\r\n    border: 1px solid #dcdfe6;\r\n  }\r\n  .body {\r\n   // margin-left: 170px;\r\n   margin: 20px 10px;\r\n  }\r\n  .bread{\r\n    display: flex;\r\n    margin-left: 20px;\r\n    margin-top: 20px;\r\n  }\r\n  </style>"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      tableData: \"\",\n      fileList: '',\n      fileInfo: []\n    };\n  },\n  methods: {\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n    },\n    beforeRemove(file, fileList) {\n      return this.$confirm(`确定移除 ${file.name}？`);\n    },\n    saveShare() {},\n    QRDecode() {\n      //扫码接收\n      console.log(\"扫码接收被点击了\");\n      this.$refs.uploadInput.click();\n    },\n    uploadFile(e) {\n      const file = e.target.files[0];\n      console.log(\"执行了uploadFile方法\");\n      //获取文件\n      let formData = new FormData();\n      formData.append('file', file);\n      console.log(\"获取到的文件\" + formData);\n      //发起请求\n      var url = \"http://localhost:8989/fileShare/readQRCode\";\n      let config = {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'satoken': sessionStorage.getItem(\"saToken\")\n        }\n      };\n      console.log(config);\n      this.$http.post(url, formData, config).then(res => {\n        console.log(res);\n        let data = res.data;\n        //加判断语句\n        if (res.data.code !== 10000) {\n          //若失败，直接提示错误原因\n          this.$message.error(res.data.message);\n        } else {\n          //成功\n          this.$message.success(\"提取文件\" + res.data.message);\n          console.log(this.fileInfo); //可以通过this获取到data中的内容\n          console.log(this.fileInfo.length);\n          this.fileInfo.push(res.data.data.fileInfo);\n          console.log(this.fileInfo);\n          console.log(this.fileInfo.length);\n        }\n      });\n    },\n    //文件下载\n    downloadFile() {\n      console.log(\"下载文件按钮点击\");\n      var that = this;\n      for (var i = 0; i < this.fileInfo.length; i++) {\n        this.$axios.get(that.fileInfo[i].downloadUrl);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA8CA;EACAA;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;IACA;IACAE;MACA;IACA;IACAC;MACA;IACA;IACAC,aAEA;IACAC;MAAA;MACAL;MACA;IACA;IACAM;MACA;MACAN;MACA;MACA;MACAO;MACAP;MACA;MACA;MACA;QACAQ;UACA;UACA;QACA;MACA;MACAR;MACA;QACAA;QACA;QACA;QACA;UAAA;UACA;QACA;UAAA;UACA;UACAA;UACAA;UACA;UACAA;UACAA;QACA;MACA;IACA;IACA;IACAS;MACAT;MACA;MACA;QACA;MACA;IACA;EACA;AACA","names":["data","tableData","fileList","fileInfo","methods","handleRemove","console","handlePreview","handleExceed","beforeRemove","saveShare","QRDecode","uploadFile","formData","headers","downloadFile"],"sourceRoot":"src/views/Receiveshare","sources":["Receiveshare.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"header\">\r\n        <span class=\"title\">收到分享</span>\r\n      </div>\r\n      <div class=\"middle\">\r\n        <el-button class=\"receivebtn\" type=\"primary\" icon=\"el-icon-star-off\"\r\n                   @click=\"QRDecode()\">\r\n          扫码接收\r\n        </el-button>\r\n        <el-button class=\"receivebtn\" type=\"primary\" icon=\"el-icon-star-off\"\r\n                   @click=\"downloadFile()\">\r\n          下载文件\r\n        </el-button>\r\n        <input\r\n            id=\"file-selector\"\r\n            ref=\"uploadInput\"\r\n            type=\"file\"\r\n            @change=\"uploadFile\"\r\n            style=\"display: none\"/>\r\n      </div>\r\n      <div class=\"line\"></div>\r\n      <div class=\"body\">\r\n        <el-table\r\n          :data=\"fileInfo\"\r\n          height=\"550\"\r\n          stripe\r\n          border\r\n          style=\"width: 100%\"\r\n          ref=\"accountTable\">\r\n          <el-table-column type=\"selection\" width=\"150\" align=\"center\"> </el-table-column>\r\n          <el-table-column prop=\"fileName\" label=\"分享文件名\" width=\"300\" align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"fileType\" label=\"文件类型\" width=\"150\" align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"fileSize\" label=\"文件大小\" width=\"150\" align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"ownerName\" label=\"分享人\" width=\"150\" align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"downloadTimes\" label=\"下载次数\" align=\"center\"> </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        tableData: \"\",\r\n        fileList:'',\r\n        fileInfo:[]\r\n      };\r\n    },\r\n    methods: {\r\n      handleRemove(file, fileList) {\r\n        console.log(file, fileList);\r\n      },\r\n      handlePreview(file) {\r\n        console.log(file);\r\n      },\r\n      handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      },\r\n      beforeRemove(file, fileList) {\r\n        return this.$confirm(`确定移除 ${ file.name }？`);\r\n      },\r\n      saveShare() {\r\n\r\n      },\r\n      QRDecode(){//扫码接收\r\n        console.log(\"扫码接收被点击了\");\r\n        this.$refs.uploadInput.click();\r\n      },\r\n      uploadFile(e){\r\n        const file = e.target.files[0];\r\n        console.log(\"执行了uploadFile方法\");\r\n        //获取文件\r\n        let formData = new FormData();\r\n        formData.append('file', file);\r\n        console.log(\"获取到的文件\" + formData);\r\n        //发起请求\r\n        var url = \"http://localhost:8989/fileShare/readQRCode\";\r\n        let config = {\r\n          headers:{\r\n            'Content-Type':'multipart/form-data',\r\n            'satoken':sessionStorage.getItem(\"saToken\")\r\n          }\r\n        }\r\n        console.log(config);\r\n        this.$http.post(url,formData,config).then(res=>{\r\n          console.log(res);\r\n          let data = res.data;\r\n          //加判断语句\r\n          if(res.data.code!==10000){//若失败，直接提示错误原因\r\n            this.$message.error(res.data.message);\r\n          }else{//成功\r\n            this.$message.success(\"提取文件\" + res.data.message);\r\n            console.log(this.fileInfo);//可以通过this获取到data中的内容\r\n            console.log(this.fileInfo.length);\r\n            this.fileInfo.push(res.data.data.fileInfo);\r\n            console.log(this.fileInfo);\r\n            console.log(this.fileInfo.length);\r\n          }\r\n        })\r\n      },\r\n      //文件下载\r\n      downloadFile(){\r\n        console.log(\"下载文件按钮点击\");\r\n        var that = this;\r\n        for (var i=0;i<this.fileInfo.length;i++){\r\n          this.$axios.get(that.fileInfo[i].downloadUrl)\r\n        }\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style lang=\"less\" scoped>\r\n  .header {\r\n    background-color: #dcdfe6;\r\n    height: 60px;\r\n    line-height: 60px;\r\n    display: flex;\r\n  }\r\n  .title {\r\n    color: #409eff;\r\n    float: left;\r\n    font-size: 30px;\r\n    margin-left: 20px;\r\n  }\r\n  .middle {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    display: flex;\r\n  }\r\n  .receivebtn {\r\n    display: flex;\r\n    margin-left: 10px;\r\n    height: 80%;\r\n    margin-top: 5px;\r\n  }\r\n  .line {\r\n    height: 0;\r\n    width: 100%;\r\n    border: 1px solid #dcdfe6;\r\n  }\r\n  .body {\r\n    margin: 20px 10px;\r\n  }\r\n  </style>"]},"metadata":{},"sourceType":"module"}
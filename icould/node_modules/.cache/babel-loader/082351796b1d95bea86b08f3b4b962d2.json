{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        account: '1005772685@qq.com',\n        password: '123456'\n      }\n    };\n  },\n  methods: {\n    newLogin() {},\n    Login() {\n      var that = this;\n      this.axios({\n        method: 'POST',\n        url: 'http://localhost:8989/login',\n        data: {\n          account: this.loginForm.account,\n          password: this.loginForm.password\n        }\n      }).then(function (response) {\n        //每次登录以前，都将isLogin设置为false\n        console.log(sessionStorage.getItem(\"isLogin\"));\n        sessionStorage.setItem(\"isLogin\", \"false\");\n        console.log(sessionStorage.getItem(\"isLogin\"));\n        console.log(response);\n        console.log(response.data.data.satoken); //输出用户token值\n        console.log(response.data.data.user); //输出用户信息\n        console.log(response.data.success);\n        if (!response.data.success) {\n          console.log(\"账号或密码错误\");\n          that.$message({\n            message: '登录失败，请重试',\n            type: 'error'\n          });\n          return;\n        }\n        var satoken = response.data.data.satoken;\n        var userId = response.data.data.user.id;\n        var userName = response.data.data.user.username;\n        //将信息放入缓存中\n        sessionStorage.setItem(\"isLogin\", \"true\");\n        sessionStorage.setItem(\"saToken\", satoken);\n        sessionStorage.setItem(\"userId\", userId);\n        sessionStorage.setItem(\"userName\", userName);\n        //检测是否登录成功\n        if (sessionStorage.getItem(\"isLogin\") == \"true\") {\n          that.$message({\n            message: '成功登录，欢迎您来到云盘系统，' + sessionStorage.getItem(\"userName\"),\n            type: 'success'\n          });\n          that.$router.push({\n            path: '/Layout'\n          });\n        } else {\n          that.$message({\n            message: '登录失败，请重试',\n            type: 'error'\n          });\n        }\n      }).catch(function (error) {\n        that.$message({\n          message: '服务器错误，请稍后重试！',\n          type: 'error'\n        });\n      });\n    },\n    toRegister() {\n      this.$router.push({\n        path: '/Register'\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAkCA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC,YAEA;IACAC;MACA;MACA;QACAC;QACAC;QACAR;UACAE;UACAC;QACA;MACA,GACAM;QACA;QACAC;QACAC;QACAD;QACAA;QACAA;QACAA;QACAA;QACA;UACAA;UACAE;YACAC;YACAC;UACA;UACA;QACA;QACA;QACA;QACA;QACA;QACAH;QACAA;QACAA;QACAA;QACA;QACA;UACAC;YACAC;YACAC;UACA;UACAF;YAAAG;UAAA;QACA;UACAH;YACAC;YACAC;UACA;QACA;MACA,GACAE;QACAJ;UACAC;UACAC;QACA;MACA;IAEA;IACAG;MACA;QAAAF;MAAA;IACA;EACA;AACA","names":["name","data","loginForm","account","password","methods","newLogin","Login","method","url","then","console","sessionStorage","that","message","type","path","catch","toRegister"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\r\n<body id=\"poster\">\r\n    <el-form class=\"login-container\" label-position=\"left\" label-width=\"0px\">\r\n        <h1 class=\"login_title\">\r\n            云盘系统\r\n        </h1>\r\n\r\n        <el-form-item label=\"\" class=\"cup\">\r\n            <i class=\"el-icon-coffee-cup\">登录页面</i>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n            <el-input type=\"text\"  v-model=\"loginForm.account\" autocomplete=\"off\" placeholder=\"邮箱/手机号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n            <el-input type=\"password\" v-model=\"loginForm.password\" autocomplete=\"off\" placeholder=\"密码\"></el-input>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item>\r\n            <el-checkbox v-model=\"checked\" class=\"button1\">记住我</el-checkbox>\r\n            <el-button type=\"primary\" style=\"background:blue;border:none\" v-on:click=\"Login()\" icon=\"el-icon-lollipop\" class=\"button2\">登录</el-button>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item class=\"whole\">\r\n            <i class=\"el-icon-back button3\">忘记密码</i>\r\n            <el-button @click=\"toRegister()\" icon=\"el-icon-right\" class=\"button4\">注册</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</body>\r\n  </template>\r\n  \r\n  <script>\r\n  \r\n  export default {\r\n    name: 'Login',\r\n    data() {\r\n      return {\r\n        loginForm: {\r\n          account: '1005772685@qq.com',\r\n          password: '123456'\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      newLogin(){\r\n\r\n      },\r\n      Login() {\r\n        var that = this;\r\n        this.axios({\r\n          method:'POST',\r\n          url:'http://localhost:8989/login',\r\n          data:{\r\n            account: this.loginForm.account,\r\n            password: this.loginForm.password\r\n          }\r\n        })\r\n            .then(function (response) {\r\n              //每次登录以前，都将isLogin设置为false\r\n              console.log(sessionStorage.getItem(\"isLogin\"));\r\n              sessionStorage.setItem(\"isLogin\",\"false\");\r\n              console.log(sessionStorage.getItem(\"isLogin\"));\r\n              console.log(response);\r\n              console.log(response.data.data.satoken);//输出用户token值\r\n              console.log(response.data.data.user);//输出用户信息\r\n              console.log(response.data.success);\r\n              if(!response.data.success){\r\n                console.log(\"账号或密码错误\");\r\n                that.$message({\r\n                  message: '登录失败，请重试',\r\n                  type: 'error'\r\n                });\r\n                return;\r\n              }\r\n              var satoken = response.data.data.satoken;\r\n              var userId = response.data.data.user.id;\r\n              var userName = response.data.data.user.username;\r\n              //将信息放入缓存中\r\n              sessionStorage.setItem(\"isLogin\",\"true\");\r\n              sessionStorage.setItem(\"saToken\",satoken);\r\n              sessionStorage.setItem(\"userId\",userId);\r\n              sessionStorage.setItem(\"userName\",userName);\r\n              //检测是否登录成功\r\n              if(sessionStorage.getItem(\"isLogin\")==\"true\"){\r\n                that.$message({\r\n                  message: '成功登录，欢迎您来到云盘系统，' + sessionStorage.getItem(\"userName\"),\r\n                  type: 'success'\r\n                });\r\n                that.$router.push({path:'/Layout'});\r\n              }else{\r\n                that.$message({\r\n                  message: '登录失败，请重试',\r\n                  type: 'error'\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              that.$message({\r\n                message: '服务器错误，请稍后重试！',\r\n                type: 'error'\r\n              });\r\n            });\r\n\r\n      },\r\n      toRegister(){\r\n        this.$router.push({path:'/Register'})\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n\r\n  <style>\r\n    #poster{\r\n        background-position: center;\r\n        height: 100%;\r\n        width: 100%;\r\n        background-size: cover;\r\n        position: fixed;\r\n    }\r\n    body{\r\n        margin: 0px;\r\n        padding: 0px;\r\n    }\r\n    .login-container{\r\n        border-radius: 15px;\r\n        background-clip: padding-box;\r\n        margin: 90px auto;\r\n        width: 350px;\r\n        padding: 35px 35px 15px 35px;\r\n        background: #fff;\r\n        border: 1px solid #eaeaea;\r\n        box-shadow: 0 0 25px #cac6c6;\r\n    }\r\n    .login_title{\r\n        margin: 0px auto 40px auto;\r\n        text-align: center;\r\n        color: #505458;\r\n    }\r\n\r\n    .cup{\r\n        float: left;\r\n        color: green;\r\n        width: 80px;\r\n    }\r\n    .button1{\r\n        float: left;\r\n    }\r\n    .button2{\r\n        float: right;\r\n        text-align: center;\r\n    }\r\n    .whole{\r\n        background-color: blue;\r\n        color: yellow;\r\n    }\r\n    .button3{\r\n        padding: 10px 10px;\r\n        float: left;\r\n    }\r\n    .whole .button4{\r\n        margin-left: auto;\r\n        float: right;\r\n        background-color: blue;\r\n        border: none;\r\n        color: white;\r\n    }\r\n  </style>\r\n  "]},"metadata":{},"sourceType":"module"}